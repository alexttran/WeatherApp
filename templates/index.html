<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WeatherApp</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Weather Icons CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div>
        <h1>
          <span>üå§Ô∏è Weather</span>
          <span class="small-text"> by Alex Tran</span>
        </h1>
        <button id="infoBtn"
          type="button"
          class="icon-btn"
          aria-haspopup="dialog"
          aria-controls="infoOverlay"
          aria-expanded="false"
          aria-label="About this app">‚ÑπÔ∏è Info
        </button>
      </div>
      <div class="unit-toggle" role="group" aria-label="Units">
        <button id="btnF" class="pill active" data-unit="fahrenheit">¬∞F</button>
        <button id="btnC" class="pill" data-unit="celsius">¬∞C</button>
      </div>
    </header>

    <!-- Search Bar -->
    <section class="search">
      <div class="searchbar">
        <input id="query" type="text" placeholder="City, ZIP, landmark, or lat,lon‚Ä¶" autocomplete="off" />
        <button id="useLocation" title="Use my current location">üìç</button>
      </div>
      <ul id="suggestions" class="suggestions" aria-label="Autocomplete suggestions"></ul>
      <p class="hint">Tip: You can paste coordinates like <code>34.05,-118.25</code> or just type a ZIP/City/Landmark.</p>
    </section>

    <!-- Database Entry -->
    <div class="range">
      <input id="startDate" type="date" aria-label="Start date" />
      <input id="endDate" type="date" aria-label="End date" />
      <button id="saveReq" class="pill">Save to DB</button>
      <button id="refreshSaved" class="pill secondary">Refresh</button>
    </div>

    <main class="grid">
      <section class="card current" id="current">
        <div class="loading">Search a place to see weather‚Ä¶</div>
      </section>

      <section class="card forecast">
        <h2>Upcoming Days</h2>
        <div id="forecast" class="forecast-grid"></div>
      </section>
    </main>

    <!-- Saved Requests in Database -->
    <section class="card saved">
      <h2>Saved Requests</h2>
      <div id="savedList" class="saved-list">
        <div class="empty">No saved requests yet.</div>
      </div>
    </section>

    <!-- Footer-->
    <footer class="footer">
      <small>
        Weather: <a href="https://open-meteo.com/" target="_blank" rel="noreferrer">Open-Meteo</a> ¬∑ 
        Geocoding: <a href="https://geocodify.com/" target="_blank" rel="noreferrer">Geocodify</a>
      </small>
    </footer>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
  
  <!-- Info Modal Overlay-->
  <div id="infoOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
      <button id="infoClose" type="button" class="icon-btn" aria-label="Close">‚úï</button>
      <header class="modal-head">
        <h3 id="infoTitle" class="modal-title">About PM Accelerator</h3>      
      </header>
      <div class="modal-body">
        <p><strong>PM Accelerator</strong> is a results-oriented career accelerator founded by Dr. Nancy Li. PM Accelerator levels 
          the playing field for future product managers by making tools and education available to people from all backgrounds. 
          The company offers training, education, and job opportunities to help dedicated individuals break into a tough industry, 
          all while investing in PMA Kids, a non-profit focused on helping disadvantaged children.</p>
      </div>
    </div>
  </div>
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>